<!-- Page header -->
<div class="flex items-center justify-between mb-6">
  <h2 class="text-2xl font-bold text-slate-800">üì¶ Product Inventory</h2>
  <a
    routerLink="/create"
    class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-4 py-2 rounded-lg transition-colors">
    + Add Product
  </a>
</div>

<!-- Loading spinner -->
@if (itemService.loading()) {
  <div class="bg-white rounded-xl shadow p-12 text-center text-slate-500">
    <div class="w-8 h-8 border-4 border-slate-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-3"></div>
    <p>Loading products...</p>
  </div>
}

<!-- Error message -->
@if (itemService.error()) {
  <div
    class="bg-red-50 border border-red-200 text-red-700 rounded-lg px-4 py-3 mb-4 text-sm">
    ‚ö†Ô∏è {{ itemService.error() }}
  </div>
}

<!-- Empty state -->
@if (
  !itemService.loading() &&
  itemService.items().length === 0 &&
  !itemService.error()
) {
  <div class="bg-white rounded-xl shadow p-12 text-center text-slate-500">
    <p class="text-4xl mb-3">üì≠</p>
    <p>
      No products yet.
      <a routerLink="/create" class="text-blue-600 underline">
        Add your first one!
      </a>
    </p>
  </div>
}

<!-- Table -->
@if (!itemService.loading() && itemService.items().length > 0) {
  <div class="bg-white rounded-xl shadow overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">

        <!-- Table head -->
        <thead class="bg-slate-800 text-white text-xs uppercase tracking-wide">
          <tr>
            <th class="px-4 py-3 text-left">#</th>
            <th class="px-4 py-3 text-left">Name</th>
            <th class="px-4 py-3 text-left">Category</th>
            <th class="px-4 py-3 text-left">Price</th>
            <th class="px-4 py-3 text-left">Qty</th>
            <th class="px-4 py-3 text-left">Status</th>
            <th class="px-4 py-3 text-left">Description</th>
            <th class="px-4 py-3 text-left">Actions</th>
          </tr>
        </thead>

        <!-- Table body -->
        <tbody>
          @for (item of itemService.items(); track item.id) {
            <tr
              class="border-b border-slate-100 hover:bg-slate-50 transition-colors">

              <td class="px-4 py-3 text-slate-400">{{ item.id }}</td>

              <td class="px-4 py-3 font-semibold text-slate-800">
                {{ item.name }}
              </td>

              <td class="px-4 py-3">
                <span
                  class="bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-1 rounded-full">
                  {{ item.category }}
                </span>
              </td>

              <td class="px-4 py-3 font-semibold text-slate-700">
                ‚Çπ{{ item.price | number:'1.2-2' }}
              </td>

              <td class="px-4 py-3">
                <span
                  [class]="
                    item.quantity < 10
                      ? 'text-orange-500 font-bold'
                      : 'text-slate-700'
                  ">
                  {{ item.quantity }}
                </span>
              </td>

              <td class="px-4 py-3">
                @if (item.status === 'In Stock') {
                  <span
                    class="bg-green-100 text-green-700 text-xs font-semibold px-2 py-1 rounded-full">
                    {{ item.status }}
                  </span>
                }
                @if (item.status === 'Out of Stock') {
                  <span
                    class="bg-red-100 text-red-700 text-xs font-semibold px-2 py-1 rounded-full">
                    {{ item.status }}
                  </span>
                }
                @if (item.status === 'Discontinued') {
                  <span
                    class="bg-slate-100 text-slate-600 text-xs font-semibold px-2 py-1 rounded-full">
                    {{ item.status }}
                  </span>
                }
              </td>

              <td class="px-4 py-3 text-slate-500 max-w-xs truncate">
                {{ item.description }}
              </td>

              <td class="px-4 py-3">
                <div class="flex gap-2">
                  <button
                    (click)="goToUpdate(item.id)"
                    class="bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-semibold px-3 py-1 rounded-lg transition-colors">
                    ‚úèÔ∏è Edit
                  </button>
                  <button
                    (click)="onDelete(item.id)"
                    class="bg-red-100 hover:bg-red-200 text-red-700 text-xs font-semibold px-3 py-1 rounded-lg transition-colors">
                    üóëÔ∏è Del
                  </button>
                </div>
              </td>

            </tr>
          }
        </tbody>

      </table>
    </div>
  </div>
}