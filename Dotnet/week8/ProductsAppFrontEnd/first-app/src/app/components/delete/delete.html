<!-- Page header -->
<div class="flex items-center justify-between mb-6">
  <h2 class="text-2xl font-bold text-slate-800">üóëÔ∏è Delete Product</h2>
  <a
    routerLink="/view"
    class="text-sm text-slate-500 border border-slate-300 bg-white hover:bg-slate-50 px-4 py-2 rounded-lg transition-colors">
    ‚Üê Back
  </a>
</div>

<div class="bg-white rounded-xl shadow p-6 max-w-xl">

  <!-- Success -->
  @if (success()) {
    <div
      class="bg-green-50 border border-green-200 text-green-700 rounded-lg px-4 py-3 mb-5 text-sm">
      ‚úÖ {{ success() }}
    </div>
  }

  <!-- Search box -->
  <p class="text-sm text-slate-600 mb-3">
    Enter the Product ID you want to delete:
  </p>

  <div class="flex gap-3 mb-4">
    <input
      type="number"
      placeholder="e.g. 3"
      [ngModel]="searchId()"
      (ngModelChange)="searchId.set($event)"
      name="sid"
      class="border border-slate-300 rounded-lg px-3 py-2 text-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 w-40" />

    <button
      (click)="onSearch()"
      [disabled]="itemService.loading()"
      class="bg-blue-600 hover:bg-blue-700 disabled:opacity-60 text-white text-sm font-semibold px-4 py-2 rounded-lg transition-colors">
      {{ itemService.loading() ? 'Searching...' : 'Find Product' }}
    </button>
  </div>

  <!-- Error -->
  @if (itemService.error()) {
    <div
      class="bg-red-50 border border-red-200 text-red-700 rounded-lg px-4 py-3 mb-4 text-sm">
      ‚ö†Ô∏è {{ itemService.error() }}
    </div>
  }

  <!-- Confirm card -->
  @if (foundItem()) {
    <div class="border-2 border-red-300 rounded-xl overflow-hidden mt-4">

      <!-- Warning bar -->
      <div
        class="bg-red-50 px-4 py-3 text-red-700 text-sm font-semibold border-b border-red-200">
        ‚ö†Ô∏è You are about to permanently delete this product:
      </div>

      <!-- Product details grid -->
      <div class="grid grid-cols-2 gap-0 p-4">

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">ID</p>
          <p class="text-sm text-slate-700">{{ foundItem()!.id }}</p>
        </div>

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Name</p>
          <p class="text-sm font-semibold text-slate-800">
            {{ foundItem()!.name }}
          </p>
        </div>

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Category</p>
          <span
            class="bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-0.5 rounded-full">
            {{ foundItem()!.category }}
          </span>
        </div>

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Price</p>
          <p class="text-sm font-semibold text-slate-700">
            ‚Çπ{{ foundItem()!.price | number:'1.2-2' }}
          </p>
        </div>

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Quantity</p>
          <p class="text-sm text-slate-700">
            {{ foundItem()!.quantity }}
          </p>
        </div>

        <div class="py-2 px-2 border-b border-slate-100">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Status</p>

          @if (foundItem()!.status === 'In Stock') {
            <span
              class="bg-green-100 text-green-700 text-xs font-semibold px-2 py-0.5 rounded-full">
              {{ foundItem()!.status }}
            </span>
          }

          @if (foundItem()!.status === 'Out of Stock') {
            <span
              class="bg-red-100 text-red-700 text-xs font-semibold px-2 py-0.5 rounded-full">
              {{ foundItem()!.status }}
            </span>
          }

          @if (foundItem()!.status === 'Discontinued') {
            <span
              class="bg-slate-100 text-slate-600 text-xs font-semibold px-2 py-0.5 rounded-full">
              {{ foundItem()!.status }}
            </span>
          }
        </div>

        <div class="py-2 px-2 col-span-2">
          <p class="text-xs font-bold text-slate-400 uppercase mb-1">Description</p>
          <p class="text-sm text-slate-600">
            {{ foundItem()!.description }}
          </p>
        </div>

      </div>

      <!-- Action buttons -->
      <div
        class="flex justify-end gap-3 px-4 py-3 bg-slate-50 border-t border-slate-100">
        <button
          (click)="onCancel()"
          class="border border-slate-300 bg-white hover:bg-slate-100 text-slate-600 text-sm font-semibold px-4 py-2 rounded-lg transition-colors">
          Cancel
        </button>

        <button
          (click)="onDelete()"
          [disabled]="itemService.loading()"
          class="bg-red-600 hover:bg-red-700 disabled:opacity-60 text-white text-sm font-semibold px-4 py-2 rounded-lg transition-colors">
          {{ itemService.loading() ? 'Deleting...' : 'üóëÔ∏è Confirm Delete' }}
        </button>
      </div>

    </div>
  }
</div>